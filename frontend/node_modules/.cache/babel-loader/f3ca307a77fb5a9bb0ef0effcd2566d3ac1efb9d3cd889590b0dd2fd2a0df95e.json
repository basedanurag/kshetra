{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import AuthService from'../services/AuthService';import'./Home.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Home=()=>{const[isAuthenticated,setIsAuthenticated]=useState(false);const[userRole,setUserRole]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{checkAuthentication();},[]);const checkAuthentication=async()=>{try{const authStatus=await AuthService.checkAuth();setIsAuthenticated(authStatus.isAuthenticated);setUserRole(authStatus.roles);}catch(error){console.error('Authentication check failed:',error);}finally{setLoading(false);}};const handleLogin=async()=>{try{setLoading(true);await AuthService.login();await checkAuthentication();}catch(error){console.error('Login failed:',error);}finally{setLoading(false);}};const handleLogout=async()=>{try{await AuthService.logout();setIsAuthenticated(false);setUserRole([]);}catch(error){console.error('Logout failed:',error);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"home-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading...\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"home-container\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"home-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Kshetra Land Registry\"}),/*#__PURE__*/_jsx(\"p\",{className:\"subtitle\",children:\"Decentralized Land Management on Internet Computer\"})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"home-main\",children:[!isAuthenticated?/*#__PURE__*/_jsxs(\"div\",{className:\"auth-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Welcome to Kshetra\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Secure, transparent, and immutable land registry powered by blockchain technology. Connect with Internet Identity to get started.\"}),/*#__PURE__*/_jsx(\"button\",{className:\"login-button\",onClick:handleLogin,children:\"Connect with Internet Identity\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Welcome back!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Choose your dashboard based on your role:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-cards\",children:[userRole.includes('Admin')||userRole.includes('LandRegistrar')?/*#__PURE__*/_jsxs(Link,{to:\"/admin\",className:\"dashboard-card admin-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Admin Dashboard\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Manage land parcels, approve registrations, and oversee the system\"})]}):null,/*#__PURE__*/_jsxs(Link,{to:\"/user\",className:\"dashboard-card user-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"User Dashboard\"}),/*#__PURE__*/_jsx(\"p\",{children:\"View your land parcels, transfer ownership, and manage documents\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-info\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Your Roles:\"}),\" \",userRole.join(', ')]}),/*#__PURE__*/_jsx(\"button\",{className:\"logout-button\",onClick:handleLogout,children:\"Logout\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"features-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Key Features\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"features-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"feature-card\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83D\\uDD12 Secure Ownership\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Cryptographically secured land ownership records\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"feature-card\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83D\\uDCCB Document Management\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Store and verify land documents on IPFS and ICP\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"feature-card\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83D\\uDDFA\\uFE0F Interactive Maps\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Visualize land parcels with geographic coordinates\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"feature-card\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83D\\uDCC8 Transaction History\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Complete audit trail of all land transactions\"})]})]})]})]})]});};export default Home;","map":{"version":3,"names":["React","useState","useEffect","Link","AuthService","jsx","_jsx","jsxs","_jsxs","Home","isAuthenticated","setIsAuthenticated","userRole","setUserRole","loading","setLoading","checkAuthentication","authStatus","checkAuth","roles","error","console","handleLogin","login","handleLogout","logout","className","children","onClick","includes","to","join"],"sources":["D:/Kshetra/frontend/src/components/Home.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport AuthService from '../services/AuthService';\r\nimport './Home.css';\r\n\r\nconst Home: React.FC = () => {\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n  const [userRole, setUserRole] = useState<string[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    checkAuthentication();\r\n  }, []);\r\n\r\n  const checkAuthentication = async () => {\r\n    try {\r\n      const authStatus = await AuthService.checkAuth();\r\n      setIsAuthenticated(authStatus.isAuthenticated);\r\n      setUserRole(authStatus.roles);\r\n    } catch (error) {\r\n      console.error('Authentication check failed:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleLogin = async () => {\r\n    try {\r\n      setLoading(true);\r\n      await AuthService.login();\r\n      await checkAuthentication();\r\n    } catch (error) {\r\n      console.error('Login failed:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      await AuthService.logout();\r\n      setIsAuthenticated(false);\r\n      setUserRole([]);\r\n    } catch (error) {\r\n      console.error('Logout failed:', error);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"home-container\">\r\n        <div className=\"loading\">Loading...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"home-container\">\r\n      <header className=\"home-header\">\r\n        <h1>Kshetra Land Registry</h1>\r\n        <p className=\"subtitle\">Decentralized Land Management on Internet Computer</p>\r\n      </header>\r\n\r\n      <main className=\"home-main\">\r\n        {!isAuthenticated ? (\r\n          <div className=\"auth-section\">\r\n            <h2>Welcome to Kshetra</h2>\r\n            <p>\r\n              Secure, transparent, and immutable land registry powered by blockchain technology.\r\n              Connect with Internet Identity to get started.\r\n            </p>\r\n            <button className=\"login-button\" onClick={handleLogin}>\r\n              Connect with Internet Identity\r\n            </button>\r\n          </div>\r\n        ) : (\r\n          <div className=\"dashboard-section\">\r\n            <h2>Welcome back!</h2>\r\n            <p>Choose your dashboard based on your role:</p>\r\n            \r\n            <div className=\"dashboard-cards\">\r\n              {userRole.includes('Admin') || userRole.includes('LandRegistrar') ? (\r\n                <Link to=\"/admin\" className=\"dashboard-card admin-card\">\r\n                  <h3>Admin Dashboard</h3>\r\n                  <p>Manage land parcels, approve registrations, and oversee the system</p>\r\n                </Link>\r\n              ) : null}\r\n              \r\n              <Link to=\"/user\" className=\"dashboard-card user-card\">\r\n                <h3>User Dashboard</h3>\r\n                <p>View your land parcels, transfer ownership, and manage documents</p>\r\n              </Link>\r\n            </div>\r\n\r\n            <div className=\"user-info\">\r\n              <p><strong>Your Roles:</strong> {userRole.join(', ')}</p>\r\n              <button className=\"logout-button\" onClick={handleLogout}>\r\n                Logout\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"features-section\">\r\n          <h3>Key Features</h3>\r\n          <div className=\"features-grid\">\r\n            <div className=\"feature-card\">\r\n              <h4>üîí Secure Ownership</h4>\r\n              <p>Cryptographically secured land ownership records</p>\r\n            </div>\r\n            <div className=\"feature-card\">\r\n              <h4>üìã Document Management</h4>\r\n              <p>Store and verify land documents on IPFS and ICP</p>\r\n            </div>\r\n            <div className=\"feature-card\">\r\n              <h4>üó∫Ô∏è Interactive Maps</h4>\r\n              <p>Visualize land parcels with geographic coordinates</p>\r\n            </div>\r\n            <div className=\"feature-card\">\r\n              <h4>üìà Transaction History</h4>\r\n              <p>Complete audit trail of all land transactions</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}