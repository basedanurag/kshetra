{"ast":null,"code":"import React,{useState}from'react';import{useLandRegistry}from'../hooks/useLandRegistry';import'./TransferManagement.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TransferManagement=_ref=>{let{transferRequests,pendingTransfers,loading,onTransferAction}=_ref;const{approveTransfer,rejectTransfer}=useLandRegistry();const[activeTab,setActiveTab]=useState('pending');const[processing,setProcessing]=useState(null);const handleApproveTransfer=async transfer=>{setProcessing(transfer.parcel_id);try{const success=await approveTransfer(transfer.parcel_id,transfer.new_owner);if(success){onTransferAction();}}catch(error){console.error('Failed to approve transfer:',error);}finally{setProcessing(null);}};const handleRejectTransfer=async(transfer,reason)=>{setProcessing(transfer.parcel_id);try{const success=await rejectTransfer(transfer.parcel_id,reason);if(success){onTransferAction();}}catch(error){console.error('Failed to reject transfer:',error);}finally{setProcessing(null);}};const currentTransfers=activeTab==='pending'?pendingTransfers:transferRequests;if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"transfer-management-loading\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading transfers...\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"transfer-management\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"transfer-tabs\",children:[/*#__PURE__*/_jsxs(\"button\",{className:`tab ${activeTab==='pending'?'active':''}`,onClick:()=>setActiveTab('pending'),children:[\"Pending (\",pendingTransfers.length,\")\"]}),/*#__PURE__*/_jsxs(\"button\",{className:`tab ${activeTab==='all'?'active':''}`,onClick:()=>setActiveTab('all'),children:[\"All Requests (\",transferRequests.length,\")\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"transfer-list\",children:currentTransfers.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"empty-transfers\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"empty-icon\",children:\"\\uD83D\\uDCCB\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"No transfer requests\"}),/*#__PURE__*/_jsx(\"p\",{children:\"There are no transfer requests to display.\"})]}):currentTransfers.map((transfer,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"transfer-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"transfer-header\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"Parcel ID: \",transfer.parcel_id]}),/*#__PURE__*/_jsx(\"span\",{className:\"transfer-status pending\",children:\"Pending\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"transfer-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"New Owner:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:transfer.new_owner.toString()})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Transfer Fee:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"value\",children:[\"\\u20B9 \",transfer.transfer_fee.toString()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Reason:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:transfer.reason})]}),transfer.documents.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Documents:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"value\",children:[transfer.documents.length,\" attached\"]})]})]}),activeTab==='pending'&&/*#__PURE__*/_jsxs(\"div\",{className:\"transfer-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"approve-button\",onClick:()=>handleApproveTransfer(transfer),disabled:processing===transfer.parcel_id,children:processing===transfer.parcel_id?'Processing...':'‚úÖ Approve'}),/*#__PURE__*/_jsx(\"button\",{className:\"reject-button\",onClick:()=>handleRejectTransfer(transfer,'Rejected by admin'),disabled:processing===transfer.parcel_id,children:processing===transfer.parcel_id?'Processing...':'‚ùå Reject'})]})]},index))})]});};export default TransferManagement;","map":{"version":3,"names":["React","useState","useLandRegistry","jsx","_jsx","jsxs","_jsxs","TransferManagement","_ref","transferRequests","pendingTransfers","loading","onTransferAction","approveTransfer","rejectTransfer","activeTab","setActiveTab","processing","setProcessing","handleApproveTransfer","transfer","parcel_id","success","new_owner","error","console","handleRejectTransfer","reason","currentTransfers","className","children","onClick","length","map","index","toString","transfer_fee","documents","disabled"],"sources":["D:/Kshetra/frontend/src/components/TransferManagement.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { TransferRequest } from '../services/LandRegistryService';\r\nimport { useLandRegistry } from '../hooks/useLandRegistry';\r\nimport './TransferManagement.css';\r\n\r\ninterface TransferManagementProps {\r\n  transferRequests: TransferRequest[];\r\n  pendingTransfers: TransferRequest[];\r\n  loading: boolean;\r\n  onTransferAction: () => void;\r\n}\r\n\r\nconst TransferManagement: React.FC<TransferManagementProps> = ({\r\n  transferRequests,\r\n  pendingTransfers,\r\n  loading,\r\n  onTransferAction\r\n}) => {\r\n  const { approveTransfer, rejectTransfer } = useLandRegistry();\r\n  const [activeTab, setActiveTab] = useState<'pending' | 'all'>('pending');\r\n  const [processing, setProcessing] = useState<string | null>(null);\r\n\r\n  const handleApproveTransfer = async (transfer: TransferRequest) => {\r\n    setProcessing(transfer.parcel_id);\r\n    try {\r\n      const success = await approveTransfer(transfer.parcel_id, transfer.new_owner);\r\n      if (success) {\r\n        onTransferAction();\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to approve transfer:', error);\r\n    } finally {\r\n      setProcessing(null);\r\n    }\r\n  };\r\n\r\n  const handleRejectTransfer = async (transfer: TransferRequest, reason: string) => {\r\n    setProcessing(transfer.parcel_id);\r\n    try {\r\n      const success = await rejectTransfer(transfer.parcel_id, reason);\r\n      if (success) {\r\n        onTransferAction();\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to reject transfer:', error);\r\n    } finally {\r\n      setProcessing(null);\r\n    }\r\n  };\r\n\r\n  const currentTransfers = activeTab === 'pending' ? pendingTransfers : transferRequests;\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"transfer-management-loading\">\r\n        <div className=\"loading-spinner\"></div>\r\n        <p>Loading transfers...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"transfer-management\">\r\n      <div className=\"transfer-tabs\">\r\n        <button\r\n          className={`tab ${activeTab === 'pending' ? 'active' : ''}`}\r\n          onClick={() => setActiveTab('pending')}\r\n        >\r\n          Pending ({pendingTransfers.length})\r\n        </button>\r\n        <button\r\n          className={`tab ${activeTab === 'all' ? 'active' : ''}`}\r\n          onClick={() => setActiveTab('all')}\r\n        >\r\n          All Requests ({transferRequests.length})\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"transfer-list\">\r\n        {currentTransfers.length === 0 ? (\r\n          <div className=\"empty-transfers\">\r\n            <div className=\"empty-icon\">üìã</div>\r\n            <h3>No transfer requests</h3>\r\n            <p>There are no transfer requests to display.</p>\r\n          </div>\r\n        ) : (\r\n          currentTransfers.map((transfer, index) => (\r\n            <div key={index} className=\"transfer-item\">\r\n              <div className=\"transfer-header\">\r\n                <h4>Parcel ID: {transfer.parcel_id}</h4>\r\n                <span className=\"transfer-status pending\">Pending</span>\r\n              </div>\r\n              \r\n              <div className=\"transfer-details\">\r\n                <div className=\"detail-row\">\r\n                  <span className=\"label\">New Owner:</span>\r\n                  <span className=\"value\">{transfer.new_owner.toString()}</span>\r\n                </div>\r\n                <div className=\"detail-row\">\r\n                  <span className=\"label\">Transfer Fee:</span>\r\n                  <span className=\"value\">‚Çπ {transfer.transfer_fee.toString()}</span>\r\n                </div>\r\n                <div className=\"detail-row\">\r\n                  <span className=\"label\">Reason:</span>\r\n                  <span className=\"value\">{transfer.reason}</span>\r\n                </div>\r\n                {transfer.documents.length > 0 && (\r\n                  <div className=\"detail-row\">\r\n                    <span className=\"label\">Documents:</span>\r\n                    <span className=\"value\">{transfer.documents.length} attached</span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {activeTab === 'pending' && (\r\n                <div className=\"transfer-actions\">\r\n                  <button\r\n                    className=\"approve-button\"\r\n                    onClick={() => handleApproveTransfer(transfer)}\r\n                    disabled={processing === transfer.parcel_id}\r\n                  >\r\n                    {processing === transfer.parcel_id ? 'Processing...' : '‚úÖ Approve'}\r\n                  </button>\r\n                  <button\r\n                    className=\"reject-button\"\r\n                    onClick={() => handleRejectTransfer(transfer, 'Rejected by admin')}\r\n                    disabled={processing === transfer.parcel_id}\r\n                  >\r\n                    {processing === transfer.parcel_id ? 'Processing...' : '‚ùå Reject'}\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TransferManagement;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}